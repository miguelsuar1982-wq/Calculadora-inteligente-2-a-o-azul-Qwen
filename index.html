<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Salud - Escuela 711</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --accent: #f59e0b;
            --accent-dark: #d97706;
            --danger: #ef4444;
            --danger-dark: #dc2626;
            --warning: #f59e0b;
            --info: #3b82f6;
            --light: #f8fafc;
            --dark: #1e293b;
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --gradient-secondary: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --shadow-light: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-heavy: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --border-radius: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: var(--dark);
            min-height: 100vh;
            line-height: 1.6;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: var(--gradient-primary);
            color: white;
            padding: 32px;
            border-radius: var(--border-radius);
            margin-bottom: 32px;
            box-shadow: var(--shadow-heavy);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        header h1 {
            font-size: 2.8rem;
            margin-bottom: 12px;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        header p {
            opacity: 0.95;
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 8px;
            font-weight: 500;
        }

        .school-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 50px;
            margin-top: 16px;
            backdrop-filter: blur(10px);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 28px;
            margin-bottom: 32px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            header h1 { font-size: 2rem; }
            header p { font-size: 1rem; }
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 32px;
            box-shadow: var(--shadow-medium);
            border: 1px solid rgba(99, 102, 241, 0.1);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }

        .card-title {
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
        }

        .card-title i {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: var(--transition);
            background: #f8fafc;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
            background: white;
        }

        .btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            margin-top: 16px;
            box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.4);
        }

        .result-card {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .result-item {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 24px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary);
            text-align: center;
            transition: var(--transition);
        }

        .result-item:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-light);
        }

        .result-item h4 {
            color: var(--primary-dark);
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .result-item p {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .risk-level {
            padding: 16px;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 700;
            margin: 16px 0;
            font-size: 1.2rem;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .risk-low { background: var(--gradient-secondary); }
        .risk-medium { background: linear-gradient(135deg, var(--accent) 0%, #fbbf24 100%); }
        .risk-high { background: linear-gradient(135deg, var(--danger) 0%, #f87171 100%); }

        .health-risk {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 16px;
            border: 1px solid rgba(226, 232, 240, 0.8);
            transition: var(--transition);
        }

        .health-risk:hover {
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .health-risk h4 {
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .risk-tag {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .risk-tag-high { background: var(--danger); color: white; }
        .risk-tag-medium { background: var(--accent); color: white; }
        .risk-tag-low { background: var(--secondary); color: white; }

        .chart-container {
            height: 350px;
            margin-top: 24px;
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-light);
        }

        .habits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .habit-card {
            background: white;
            padding: 24px;
            border-radius: var(--border-radius);
            border: 2px solid transparent;
            transition: var(--transition);
            text-align: center;
            box-shadow: var(--shadow-light);
        }

        .habit-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .habit-card h4 {
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 1.2rem;
        }

        .habit-icon {
            font-size: 2.5rem;
            margin-bottom: 16px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .info-section {
            margin-top: 32px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 28px;
        }

        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        .info-card {
            background: white;
            padding: 28px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }

        .info-card h3 {
            color: var(--primary);
            margin-bottom: 16px;
            font-size: 1.4rem;
        }

        footer {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 32px;
            border-radius: var(--border-radius);
            margin-top: 32px;
            text-align: center;
            box-shadow: var(--shadow-heavy);
        }

        .hidden {
            display: none;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
            70% { box-shadow: 0 0 0 12px rgba(99, 102, 241, 0); }
            100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
        }

        .recommendation-card {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 24px;
            border-radius: var(--border-radius);
            margin-top: 24px;
            box-shadow: var(--shadow-medium);
        }

        .recommendation-card h3 {
            font-size: 1.5rem;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendation-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .recommendation-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 16px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .nutrition-facts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .nutrition-item {
            text-align: center;
            padding: 16px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-light);
        }

        .nutrition-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <h1><i class="fas fa-heartbeat"></i> Calculadora de Salud Inteligente</h1>
            <p>Escuela Provincial N° 711 "Federico Brandsen" - Comodoro Rivadavia</p>
            <p>Segundo Año - Primera División</p>
            <div class="school-badge">
                <i class="fas fa-graduation-cap"></i>
                <span>Proyecto Educativo 2025</span>
            </div>
        </header>

        <div class="main-content">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-user-edit"></i>
                    Datos Personales
                </h2>
                <form id="healthForm">
                    <div class="form-group">
                        <label for="name"><i class="fas fa-user"></i> Nombre Completo</label>
                        <input type="text" id="name" placeholder="Ingresa tu nombre completo" required>
                    </div>
                    <div class="form-group">
                        <label for="age"><i class="fas fa-birthday-cake"></i> Edad (años)</label>
                        <input type="number" id="age" placeholder="Ingresa tu edad" min="1" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="gender"><i class="fas fa-venus-mars"></i> Género</label>
                        <select id="gender" required>
                            <option value="male">Masculino</option>
                            <option value="female">Femenino</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="weight"><i class="fas fa-weight"></i> Peso (kg)</label>
                        <input type="number" step="0.1" id="weight" placeholder="Ingresa tu peso" min="1" max="300" required>
                    </div>
                    <div class="form-group">
                        <label for="height"><i class="fas fa-ruler-vertical"></i> Estatura (cm)</label>
                        <input type="number" step="0.1" id="height" placeholder="Ingresa tu estatura" min="50" max="250" required>
                    </div>
                    <button type="submit" class="btn pulse">
                        <i class="fas fa-calculator"></i>
                        Calcular Índices de Salud
                    </button>
                </form>
            </div>

            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-chart-line"></i>
                    Resultados Detallados
                </h2>
                <div id="resultsSection" class="hidden">
                    <div class="result-card">
                        <div class="result-item">
                            <h4><i class="fas fa-percentage"></i> IMC</h4>
                            <p id="bmiValue">-</p>
                            <small id="bmiCategory" style="color: var(--primary-dark); font-weight: 600;">Categoría</small>
                        </div>
                        <div class="result-item">
                            <h4><i class="fas fa-fire"></i> TMB</h4>
                            <p id="bmrValue">-</p>
                            <small style="color: var(--secondary-dark);">kcal/día</small>
                        </div>
                    </div>
                    <div class="risk-level" id="riskLevel">Nivel de Riesgo</div>
                    
                    <div class="recommendation-card">
                        <h3><i class="fas fa-lightbulb"></i> Recomendaciones Personalizadas</h3>
                        <div id="personalizedRecommendations" class="recommendation-list">
                            <!-- Se llenará dinámicamente -->
                        </div>
                    </div>
                </div>
                <div id="healthRisks" class="hidden">
                    <h3 class="card-title" style="font-size: 1.3rem;">
                        <i class="fas fa-exclamation-triangle"></i>
                        Riesgos de Salud Asociados
                    </h3>
                    <div id="risksList"></div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-chart-bar"></i>
                Evolución del IMC y Tendencias
            </h2>
            <div class="chart-container">
                <canvas id="bmiChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-seedling"></i>
                Hábitos Saludables Recomendados
            </h2>
            <div class="habits-grid" id="habitsGrid">
                <div class="habit-card">
                    <div class="habit-icon">
                        <i class="fas fa-apple-alt"></i>
                    </div>
                    <h4>Alimentación Balanceada</h4>
                    <p>Consume 5 porciones diarias de frutas y verduras, proteínas magras y grasas saludables.</p>
                </div>
                <div class="habit-card">
                    <div class="habit-icon">
                        <i class="fas fa-running"></i>
                    </div>
                    <h4>Ejercicio Físico</h4>
                    <p>Realiza 150 minutos semanales de actividad moderada o 75 minutos de intensidad vigorosa.</p>
                </div>
                <div class="habit-card">
                    <div class="habit-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <h4>Hidratación Óptima</h4>
                    <p>Bebe al menos 2 litros de agua diarios, más si realizas actividad física o hace calor.</p>
                </div>
                <div class="habit-card">
                    <div class="habit-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <h4>Sueño de Calidad</h4>
                    <p>Mantén un horario regular de sueño, durmiendo 7-9 horas cada noche para la recuperación.</p>
                </div>
            </div>
        </div>

        <div class="card info-section">
            <h2 class="card-title">
                <i class="fas fa-book-open"></i>
                Información Educativa
            </h2>
            <div class="info-grid">
                <div class="info-card">
                    <h3><i class="fas fa-ruler-combined"></i> Índice de Masa Corporal (IMC)</h3>
                    <p>El IMC es una medida que relaciona tu peso con tu estatura. Se calcula dividiendo tu peso en kilogramos por el cuadrado de tu estatura en metros. Es una herramienta simple pero útil para evaluar si tienes un peso saludable.</p>
                    <div class="nutrition-facts">
                        <div class="nutrition-item">
                            <small>Bajo peso</small>
                            <div class="nutrition-value">&lt;18.5</div>
                        </div>
                        <div class="nutrition-item">
                            <small>Normal</small>
                            <div class="nutrition-value">18.5-24.9</div>
                        </div>
                        <div class="nutrition-item">
                            <small>Sobrepeso</small>
                            <div class="nutrition-value">25-29.9</div>
                        </div>
                        <div class="nutrition-item">
                            <small>Obesidad</small>
                            <div class="nutrition-value">&gt;30</div>
                        </div>
                    </div>
                </div>
                <div class="info-card">
                    <h3><i class="fas fa-fire-alt"></i> Tasa Metabólica Basal (TMB)</h3>
                    <p>La TMB representa la cantidad mínima de calorías que tu cuerpo necesita para mantener funciones vitales en reposo, como respirar, bombear sangre y mantener la temperatura corporal. Varía según edad, género, peso y altura.</p>
                    <p><strong>Factores que influyen:</strong> Edad (disminuye con los años), género (hombres suelen tener mayor TMB), masa muscular (más músculo = mayor TMB).</p>
                </div>
            </div>
        </div>

        <footer>
            <p><i class="fas fa-school"></i> Escuela Provincial N° 711 "Federico Brandsen"</p>
            <p>Comodoro Rivadavia - Segundo Año - Primera División</p>
            <p><i class="fas fa-heart"></i> Proyecto de Educación Física y Salud Integral - 2025</p>
        </footer>
    </div>

    <script>
        // Datos de ejemplo para el gráfico
        const sampleData = {
            labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
            datasets: [{
                label: 'IMC',
                data: [22, 23, 21, 24, 22, 21],
                borderColor: '#6366f1',
                backgroundColor: 'rgba(99, 102, 241, 0.1)',
                tension: 0.4,
                fill: true,
                pointBackgroundColor: '#6366f1',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 6,
                pointHoverRadius: 8
            }]
        };

        // Configuración del gráfico
        const config = {
            type: 'line',
            data: sampleData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Evolución del IMC - Últimos 6 Meses',
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    },
                    legend: {
                        display: true,
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 15,
                        max: 30,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            font: {
                                size: 12
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 12
                            }
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        };

        // Inicializar el gráfico
        window.onload = function() {
            const ctx = document.getElementById('bmiChart').getContext('2d');
            new Chart(ctx, config);
        };

        // Función para calcular el IMC
        function calculateBMI(weight, height) {
            const heightInMeters = height / 100;
            return (weight / (heightInMeters * heightInMeters)).toFixed(2);
        }

        // Función para calcular la TMB
        function calculateBMR(weight, height, age, gender) {
            if (gender === 'male') {
                return Math.round(88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age));
            } else {
                return Math.round(447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age));
            }
        }

        // Función para obtener la categoría del IMC
        function getBMICategory(bmi) {
            if (bmi < 18.5) return { category: 'Bajo peso', risk: 'Alto', color: '#3B82F6', icon: 'fas fa-weight-hanging' };
            if (bmi < 25) return { category: 'Peso normal', risk: 'Bajo', color: '#10B981', icon: 'fas fa-check-circle' };
            if (bmi < 30) return { category: 'Sobrepeso', risk: 'Moderado', color: '#F59E0B', icon: 'fas fa-exclamation-circle' };
            return { category: 'Obesidad', risk: 'Alto', color: '#EF4444', icon: 'fas fa-skull-crossbones' };
        }

        // Función para obtener recomendaciones personalizadas
        function getPersonalizedRecommendations(bmiCategory, age, weight, height) {
            const recommendations = [];
            
            if (bmiCategory === 'Bajo peso') {
                recommendations.push({
                    title: 'Aumenta tu ingesta calórica',
                    description: 'Agrega alimentos ricos en nutrientes como frutos secos, aguacate y proteínas magras.'
                });
                recommendations.push({
                    title: 'Entrenamiento de fuerza',
                    description: 'Realiza ejercicios de fuerza 2-3 veces por semana para aumentar masa muscular.'
                });
                recommendations.push({
                    title: 'Consulta con nutricionista',
                    description: 'Un profesional puede ayudarte a crear un plan de alimentación adecuado.'
                });
            } else if (bmiCategory === 'Sobrepeso' || bmiCategory === 'Obesidad') {
                recommendations.push({
                    title: 'Reduce calorías gradualmente',
                    description: 'Crea un déficit calórico de 500 kcal diarias para perder peso de forma saludable.'
                });
                recommendations.push({
                    title: 'Actividad cardiovascular',
                    description: 'Incorpora 30-60 minutos diarios de caminata, ciclismo o natación.'
                });
                recommendations.push({
                    title: 'Control de porciones',
                    description: 'Usa platos más pequeños y come lentamente para mejorar la saciedad.'
                });
            } else {
                recommendations.push({
                    title: 'Mantén tu estilo de vida',
                    description: '¡Excelente trabajo! Continúa con tus hábitos saludables actuales.'
                });
                recommendations.push({
                    title: 'Variedad nutricional',
                    description: 'Asegúrate de consumir una amplia variedad de alimentos para obtener todos los nutrientes.'
                });
                recommendations.push({
                    title: 'Actividad regular',
                    description: 'Mantén al menos 150 minutos semanales de actividad física moderada.'
                });
            }
            
            return recommendations;
        }

        // Función para obtener riesgos de salud
        function getHealthRisks(category) {
            switch(category) {
                case 'Bajo peso':
                    return [
                        { disease: 'Osteoporosis', risk: 'Alto', symptoms: 'Debilidad ósea, fracturas frecuentes, dolor en huesos' },
                        { disease: 'Anemia', risk: 'Moderado', symptoms: 'Fatiga extrema, palidez, mareos, dificultad para concentrarse' },
                        { disease: 'Problemas hormonales', risk: 'Alto', symptoms: 'Irregularidades menstruales, infertilidad, pérdida de masa muscular' }
                    ];
                case 'Sobrepeso':
                    return [
                        { disease: 'Diabetes tipo 2', risk: 'Alto', symptoms: 'Sed excesiva, fatiga, visión borrosa, heridas que sanan lentamente' },
                        { disease: 'Hipertensión', risk: 'Alto', symptoms: 'Dolor de cabeza frecuente, mareos, visión borrosa, palpitaciones' },
                        { disease: 'Enfermedad cardíaca', risk: 'Moderado', symptoms: 'Dolor en el pecho, dificultad para respirar, fatiga extrema' }
                    ];
                case 'Obesidad':
                    return [
                        { disease: 'Diabetes tipo 2', risk: 'Muy alto', symptoms: 'Sed excesiva, fatiga, visión borrosa, infecciones recurrentes' },
                        { disease: 'Enfermedad cardiovascular', risk: 'Muy alto', symptoms: 'Dolor en el pecho, dificultad para respirar, hinchazón en piernas' },
                        { disease: 'Apnea del sueño', risk: 'Alto', symptoms: 'Ronquidos fuertes, somnolencia diurna, despertares nocturnos' },
                        { disease: 'Cáncer', risk: 'Elevado', symptoms: 'Depende del tipo específico, incluye pérdida de peso inexplicable' }
                    ];
                default:
                    return [
                        { disease: 'Riesgo óptimo', risk: 'Bajo', symptoms: 'Buena salud general, energía adecuada, función inmunológica óptima' }
                    ];
            }
        }

        // Manejar el envío del formulario
        document.getElementById('healthForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const age = parseFloat(document.getElementById('age').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const gender = document.getElementById('gender').value;
            
            const bmi = calculateBMI(weight, height);
            const bmr = calculateBMR(weight, height, age, gender);
            const bmiCategory = getBMICategory(bmi);
            
            // Mostrar resultados
            document.getElementById('bmiValue').textContent = bmi;
            document.getElementById('bmrValue').textContent = bmr;
            document.getElementById('bmiCategory').textContent = bmiCategory.category;
            
            // Mostrar nivel de riesgo
            const riskLevel = document.getElementById('riskLevel');
            riskLevel.textContent = `Nivel de Riesgo: ${bmiCategory.risk}`;
            riskLevel.className = `risk-level risk-${bmiCategory.risk.toLowerCase()}`;
            
            // Mostrar recomendaciones personalizadas
            const recommendations = getPersonalizedRecommendations(bmiCategory.category, age, weight, height);
            const recommendationsContainer = document.getElementById('personalizedRecommendations');
            recommendationsContainer.innerHTML = '';
            
            recommendations.forEach(rec => {
                const recDiv = document.createElement('div');
                recDiv.className = 'recommendation-item';
                recDiv.innerHTML = `
                    <h4 style="font-weight: 600; margin-bottom: 8px;">${rec.title}</h4>
                    <p style="font-size: 0.9rem; opacity: 0.9;">${rec.description}</p>
                `;
                recommendationsContainer.appendChild(recDiv);
            });
            
            // Mostrar riesgos de salud
            const healthRisks = getHealthRisks(bmiCategory.category);
            const risksList = document.getElementById('risksList');
            risksList.innerHTML = '';
            
            healthRisks.forEach(risk => {
                const riskDiv = document.createElement('div');
                riskDiv.className = 'health-risk';
                riskDiv.innerHTML = `
                    <h4>
                        ${risk.disease} 
                        <span class="risk-tag risk-tag-${risk.risk.toLowerCase().replace(' ', '-')}">${risk.risk}</span>
                    </h4>
                    <p><strong>Síntomas:</strong> ${risk.symptoms}</p>
                `;
                risksList.appendChild(riskDiv);
            });
            
            // Mostrar secciones
            document.getElementById('resultsSection').classList.remove('hidden');
            document.getElementById('healthRisks').classList.remove('hidden');
            
            // Scroll suave hacia los resultados
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        });

        // Actualizar el gráfico con nuevos datos
        function updateChart(newData) {
            const chart = Chart.getChart('bmiChart');
            if (chart) {
                chart.data.datasets[0].data = newData;
                chart.update();
            }
        }
    </script>
</body>
</html>

